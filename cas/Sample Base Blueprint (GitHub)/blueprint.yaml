name: Sample Base Blueprint (GitHub)
description: This is a sample blueprint that should be a mirror of the "Multi-Cloud Master" blueprint in Demo project. This variant is managed from within GitHub and imported. 
version: 3
formatVersion: 1
inputs:
  cloud_type:
    type: string
    title: Cloud Type
    description: Should this request be provisioned into a public or private cloud?
    default: 'cloud_type:public'
    oneOf:
      - title: Private
        const: 'cloud_type:private'
      - title: Public
        const: 'cloud_type:public'
  environment:
    type: string
    title: Provisioning Environment
    description: Which environment will this blueprint be provisioned into?
    default: 'env:dev'
    oneOf:
      - title: Development
        const: 'env:dev'
      - title: QA
        const: 'env:qa'
      - title: Production
        const: 'env:prod'
  flavor:
    type: string
    title: System Size
    description: What t-shirt size to use for the web server?
    default: generic.small
    oneOf:
      - title: Tiny
        const: generic.tiny
      - title: Small
        const: generic.small
      - title: Medium
        const: generic.medium
      - title: Large
        const: generic.large
  image:
    type: string
    title: Operating System
    description: What operating system to use for the web server?
    default: CentOS 7
    enum:
      - CentOS 7
      - Windows Server 2012 R2
      - Windows Server 2016
      - Ubuntu 16.04 LTS
      - Ubuntu 18.04
resources:
  Cloud_Network:
    type: Cloud.Network
    properties:
      networkType: existing
      constraints:
        - tag: '${input.cloud_type}'
  Cloud_Machine:
    type: Cloud.Machine
    properties:
      customizationSpec: '${starts_with(to_lower(input.image),"windows") == true ? "KPSC-Windows_Domain" : "KPSC-Linux"}'
      image: '${input.image}'
      flavor: '${input.flavor}'
      constraints:
        - tag: '${input.cloud_type}'
        - tag: '${input.environment}'
      networks:
        - network: '${resource.Cloud_Network.id}'
          assignment: static
          assignPublicIpAddress: false
